# ğŸ¤– Agent åä½œäº¤æ¥æ‰‹å†Œ (Agent Handoff Manual)

**æœ€åæ›´æ–°**: 2026-02-11
**ç›®æ ‡è¯»è€…**: æ¥æ‰‹é¡¹ç›®çš„ AI Agent (Gemini, Claude, DeepSeek ç­‰) åŠå¼€å‘è€…
**é¡¹ç›®ç¯å¢ƒ**: OpenClaw éƒ¨ç½²äº Zeabur (PaaS)

æ­¤æ–‡æ¡£æ—¨åœ¨å¸®åŠ©åç»­çš„ Agent å¿«é€Ÿç†è§£æœ¬é¡¹ç›®ç‰¹æ®Šçš„éƒ¨ç½²ç¯å¢ƒä¸ç¯å¢ƒå˜é‡é…ç½®ï¼Œé˜²æ­¢å› ç¯å¢ƒå·®å¼‚å¯¼è‡´æœåŠ¡å´©æºƒã€‚

---

## ğŸ‡¨ğŸ‡³ ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸­æ–‡ç‰ˆ (Chinese Version)

### 1. ğŸ”‘ ç¯å¢ƒå˜é‡ä¸å¯†é’¥ç®¡ç† (Secrets & Env Vars)

æˆ‘ä»¬æœ‰ä¸¤ä¸ªå±‚é¢çš„ç¯å¢ƒå˜é‡ï¼š
1.  **Zeabur ç”Ÿäº§ç¯å¢ƒ**: åœ¨ Zeabur Dashboard è®¾ç½®ã€‚
2.  **æœ¬åœ°/å¤‡ä»½ç¯å¢ƒ**: åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.env.zeabur` æ–‡ä»¶ä¸­ã€‚

#### ğŸ“„ æœ¬åœ°å¯†é’¥æ–‡ä»¶: `.env.zeabur` (é‡è¦ï¼)

**è‡´ Agent**: å¦‚æœä½ æƒ³æ‰¾çœŸå®çš„ API Key (æ¯”å¦‚ `sk-or-...`)ï¼Œ**è¯·ç›´æ¥æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„ `.env.zeabur` æ–‡ä»¶**ã€‚ä¸è¦åœ¨ç¡¬ç›˜é‡Œä¹±æœäº†ï¼

| å˜é‡å (Key) | ç”¨é€”è¯´æ˜ | é‡è¦æ€§ | å¤‡æ³¨ |
| :--- | :--- | :--- | :--- |
| `OPENROUTER_API_KEY` | **æ¨¡å‹å¯†é’¥** | ğŸ”´ **æé«˜** | çœŸå®å€¼è§ `.env.zeabur` |
| `OPENCLAW_GATEWAY_TOKEN` | **è®¤è¯ä»¤ç‰Œ** | ğŸ”´ **æé«˜** | çœŸå®å€¼è§ `.env.zeabur` |
| `TELEGRAM_BOT_TOKEN` | **Telegram æœºå™¨äººå¯†é’¥** | ğŸŸ¡ ä¸­ç­‰ | (å·²ç¦ç”¨ï¼Œéœ€åœ¨ UI å¼€å¯) |
| `BRAVE_SEARCH_API_KEY` | **è”ç½‘æœç´¢å¯†é’¥** | ğŸŸ¡ ä¸­ç­‰ | çœŸå®å€¼è§ `.env.zeabur` |
| `POSTGRES_...` | **æ•°æ®åº“è¿æ¥** | ğŸŸ¢ ç³»ç»Ÿçº§ | çœŸå®å€¼è§ `.env.zeabur` |
| `S3_...` | **å¯¹è±¡å­˜å‚¨ (MinIO)** | ğŸŸ¢ ç³»ç»Ÿçº§ | çœŸå®å€¼è§ `.env.zeabur` |

### 2. ğŸ—ï¸ æ¶æ„ä¸æ–‡ä»¶ç³»ç»Ÿ (ç‰¹æ®Šæœºåˆ¶)

**è‡´æœªæ¥çš„ Agentï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹æœºåˆ¶ï¼Œè¿™ä¸æ ‡å‡† Docker ä¸åŒï¼š**

1.  **ç‹¬æœ‰çš„â€œå¼ºåˆ¶é‡ç½®â€é€»è¾‘ (Force Reset)**:
    *   **é—®é¢˜**: Zeabur ä¼šæŒä¹…åŒ–ä¿ç•™ `/home/node/.openclaw` ç›®å½•ã€‚å¦‚æœé‡Œé¢æ®‹ç•™äº†æ—§çš„ã€é”™è¯¯çš„é…ç½®æ–‡ä»¶ï¼Œä½ å³ä½¿æ¨é€äº†æ–°çš„ Git ä»£ç ï¼ŒæœåŠ¡è¯»å–çš„è¿˜æ˜¯æ—§é…ç½®ï¼Œå¯¼è‡´éƒ¨ç½²å¤±è´¥ã€‚
    *   **è§£å†³æ–¹æ¡ˆ**: æˆ‘ä»¬çš„å¯åŠ¨è„šæœ¬ (`docker-entrypoint.sh`) å†™æ­»äº†é€»è¾‘ï¼š**æ¯æ¬¡å¯åŠ¨æ—¶ï¼Œå¼ºåˆ¶åˆ é™¤æŒä¹…åŒ–ç›®å½•é‡Œçš„ `openclaw.json`**ã€‚
    *   **ä½ çš„è¡ŒåŠ¨å‡†åˆ™**: **Git ä»£ç æ˜¯å”¯ä¸€çœŸç†**ã€‚ä¸è¦è¯•å›¾ SSH è¿›å®¹å™¨ä¿®æ”¹æ–‡ä»¶ï¼Œä¹Ÿä¸è¦æŒ‡æœ›å®¹å™¨é‡å¯åæ–‡ä»¶è¿˜åœ¨ã€‚**ä¿®æ”¹ `openclaw.zeabur.json` å¹¶æ¨é€åˆ°ä»“åº“**ï¼Œæ‰æ˜¯å”¯ä¸€æ­£ç¡®çš„ä¿®æ”¹æ–¹å¼ã€‚

2.  **å®¹å™¨å†…å…³é”®è·¯å¾„**:
    *   é…ç½®æ–‡ä»¶: `/home/node/.openclaw/openclaw.json` (ç”±å¯åŠ¨è„šæœ¬ç”Ÿæˆ)
    *   èŠå¤©è®°å½•: `/home/node/.openclaw/workspace` (åªæœ‰è¿™ä¸ªç›®å½•æ˜¯çœŸæ­£æŒä¹…åŒ–ä¸”å®‰å…¨çš„)
    *   æµè§ˆå™¨æ–‡ä»¶: `/home/node/.openclaw/playwright` (æŒä¹…åŒ–ä¿ç•™çš„å¤§æ–‡ä»¶)

### 3. ğŸš¨ æ•…éšœæ•‘æ´åè®® (Rescue Protocol)

**å¦‚æœé‡åˆ° 502 Bad Gateway æˆ– Crash Loop (æ— é™é‡å¯):**

1.  **ç¬¬ä¸€æ­¥**: æ‰“å¼€ `.env.zeabur`ï¼Œç¡®è®¤é‡Œé¢çš„ Key æ˜¯å¦æ­£ç¡®ã€‚
2.  **ç¬¬äºŒæ­¥**: æ£€æŸ¥ **Zeabur å˜é‡** æ˜¯å¦æ¼å¡«äº†è¿™äº› Keyã€‚
3.  **ç¬¬ä¸‰æ­¥**: æ£€æŸ¥é…ç½®æ–‡ä»¶ (`openclaw.zeabur.json`) æ˜¯å¦æœ‰éæ³•å­—æ®µ (å¦‚ `tools.browser`, `_config_version`)ã€‚
4.  **ç¬¬å››æ­¥ (å¤§æ‹›)**: ä½¿ç”¨"é»„é‡‘å¤‡ä»½"æ¢å¤:
    *   è·¯å¾„: `docs/20260210_GOLDEN_CONFIG.md`
    *   æ“ä½œ: å°†è¯¥æ–‡ä»¶ä¸­çš„ä»£ç å®Œæ•´è¦†ç›–å›æ ¹ç›®å½•ï¼Œæäº¤æ¨é€ã€‚

---
---

## ğŸ‡ºğŸ‡¸ Part 2: English Version

### 1. ğŸ”‘ Environment Variables & Secrets

We manage secrets in two places:
1.  **Production (Zeabur)**: Configured in the Dashboard.
2.  **Local/Backup**: Stored in `.env.zeabur`.

#### ğŸ“„ Local Secrets File: `.env.zeabur` (IMPORTANT!)

**To Agent**: If you are looking for the ACTUAL API Keys (e.g., `sk-or-...`), **LOOK AT `.env.zeabur` in the root directory**. Do not scan the entire hard drive!

| Variable Name (Key) | Description | Criticality | Notes |
| :--- | :--- | :--- | :--- |
| `OPENROUTER_API_KEY` | **LLM API Key** | ğŸ”´ **High** | See `.env.zeabur` for value |
| `OPENCLAW_GATEWAY_TOKEN` | **Auth Token** | ğŸ”´ **High** | See `.env.zeabur` for value |
| `TELEGRAM_BOT_TOKEN` | **Telegram Bot Token** | ğŸŸ¡ Medium | (Disabled, verify in UI) |
| `BRAVE_SEARCH_API_KEY` | **Web Search Key** | ğŸŸ¡ Medium | See `.env.zeabur` for value |
| `POSTGRES_...` | **Database Config** | ğŸŸ¢ System | See `.env.zeabur` for value |
| `S3_...` | **Object Storage** | ğŸŸ¢ System | See `.env.zeabur` for value |

### 2. ğŸ—ï¸ Architecture & Filesystem (Special Mechanism)

**To Future Agents, please read this carefully as it differs from standard Docker:**

1.  **Unique "Force Reset" Logic**:
    *   **The Problem**: Zeabur persists the `/home/node/.openclaw` volume. If an old, broken config remains there, redeploying code *will not* take effect, leading to persistent failures.
    *   **The Solution**: Our startup script (`docker-entrypoint.sh`) has hardcoded logic: **Forcefully delete `openclaw.json` in the persistent volume on every startup.**
    *   **Action Item**: **Git is the only Source of Truth.** Do NOT try to ssh into the container to fix files. **Modify `openclaw.zeabur.json` in the repo and push.**

2.  **Key Container Paths**:
    *   Config File: `/home/node/.openclaw/openclaw.json` (Generated by entrypoint)
    *   Workspace: `/home/node/.openclaw/workspace` (The ONLY path that is truly safe and persisted for data)
    *   Browsers: `/home/node/.openclaw/playwright` (Persisted binaries)

### 3. ğŸš¨ Rescue Protocol

**If you encounter 502 Bad Gateway or Crash Loops:**

1.  **Step 1**: Open `.env.zeabur` and verify the keys are correct.
2.  **Step 2**: Check **Zeabur Variables** to ensure they match `.env.zeabur`.
3.  **Step 3**: Check `openclaw.zeabur.json` for invalid fields (`tools.browser`, `_config_version`).
4.  **Step 4 (Nuclear Option)**: Restore from Golden Backup:
    *   Path: `docs/20260210_GOLDEN_CONFIG.md`
    *   Action: Copy the file contents back to the root directory and push.
